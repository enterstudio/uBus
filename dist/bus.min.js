var Bus=function(){function t(){this._q=[]}return t.prototype.emit=function(t,i){for(var n=0,o=this._q.length;n<o;n++)if(this._q[n].token===t&&(this._q[n].cb(i),this._q[n].once)){this._q.splice(n,1);break}},t.prototype.on=function(t,i){var n=this,o=this._genId();return this._q.push({_id:o,token:t,cb:i,once:!1}),function(){for(var t=0,i=n._q.length;t<i;t++)if(n._q[t]._id===o){n._q.splice(t,1);break}}},t.prototype.once=function(t,i){this._q.push({_id:this._genId(),token:t,cb:i,once:!0})},t.prototype.off=function(t){var i=this;if("string"==typeof t)for(var n=0,o=this._q.length;n<o;n++)this._q[n].token===t&&(this._q[n].del=!0);"object"==typeof t&&t.length&&t.forEach(function(t){for(var n=0,o=i._q.length;n<o;n++)i._q[n].token===t&&(i._q[n].del=!0)}),this._q=this._q.filter(function(t){return!t.del})},t.prototype._s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t.prototype._genId=function(){return this._s4()+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+this._s4()+this._s4()},t}();