var Bus=function(){function t(){this._q=[]}return t.prototype.emit=function(t,n){for(var o=0,i=this._q.length;o<i;o++)if(this._q[o].token===t&&(this._q[o].cb(n),this._q[o].once)){this._q.splice(o,1);break}},t.prototype.on=function(t,n){var o=this,i=this._genId();return this._q.push({_id:i,token:t,cb:n,once:!1}),function(){for(var t=0,n=o._q.length;t<n;t++)if(o._q[t]._id===i){o._q.splice(t,1);break}}},t.prototype.once=function(t,n){this._q.push({_id:this._genId(),token:t,cb:n,once:!0})},t.prototype.off=function(t){var n=this;if("string"==typeof t)for(var o=0,i=this._q.length;o<i;o++)this._q[o].token===t&&(this._q[o].del=!0);"object"==typeof t&&t.length&&t.forEach(function(t){for(var o=0,i=n._q.length;o<i;o++)n._q[o].token===t&&(n._q[o].del=!0)}),this._q=this._q.filter(function(t){return!t.del})},t.prototype._genId=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t}();