class Bus{constructor(){this._q=[]}emit(a,b){if(!a){throw new TypeError(this._tokenNotInformedMessage('emit'))}for(let i=0,len=this._q.length;i<len;i++){if(this._q[i].token===a){this._q[i].cb(b);if(this._q[i].once){this._q.splice(i,1);break}}}}on(a,b){if(!a){throw new TypeError(this._tokenNotInformedMessage('on'))}let c=this._genId();this._q.push({_id:c,token:a,cb:b,once:!1,del:!1});return()=>{for(let i=0,len=this._q.length;i<len;i++){if(this._q[i]._id===c){this._q.splice(i,1);break}}}}once(a,b){if(!a){throw new TypeError(this._tokenNotInformedMessage('once'))}this._q.push({_id:this._genId(),token:a,cb:b,once:!0,del:!1})}off(a){if(typeof a=='string'){for(let i=0,len=this._q.length;i<len;i++){if(this._q[i].token===a){this._q[i].del=!0}}}if(typeof a=='object'&&!!a.length){a.forEach(t=>{for(let i=0,len=this._q.length;i<len;i++){if(this._q[i].token===t){this._q[i].del=!0}}})}this._q=this._q.filter(item=>!item.del)}_tokenNotInformedMessage(a){return`[${a}] - Token not informed.`}_s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}_genId(){return this._s4()+this._s4()+'-'+this._s4()+'-'+this._s4()+'-'+this._s4()+'-'+this._s4()+this._s4()+this._s4()}}export{Bus};