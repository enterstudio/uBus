"use strict";System.register([],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,o,r;return{setters:[],execute:function(){i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),e("Bus",r=function(){function e(){n(this,e),this._q=[]}return o(e,[{key:"emit",value:function(e,t){if(!e)throw new TypeError(this._invalidTokenMessage("emit"));for(var n=0,i=this._q.length;n<i;n++)if(this._q[n].token===e&&(this._q[n].cb(t),this._q[n].once)){this._q.splice(n,1);break}}},{key:"on",value:function(e,t){var n=this;if(!e)throw new TypeError(this._invalidTokenMessage("on"));var i=this._genId();return this._q.push({_id:i,token:e,cb:t,once:!1,del:!1}),function(){for(var e=0,t=n._q.length;e<t;e++)if(n._q[e]._id===i){n._q.splice(e,1);break}}}},{key:"once",value:function(e,t){if(!e)throw new TypeError(this._invalidTokenMessage("once"));this._q.push({_id:this._genId(),token:e,cb:t,once:!0,del:!1})}},{key:"off",value:function(e){var t=this;if("string"==typeof e)for(var n=0,o=this._q.length;n<o;n++)this._q[n].token===e&&(this._q[n].del=!0);"object"===("undefined"==typeof e?"undefined":i(e))&&e.length&&e.forEach(function(e){for(var n=0,i=t._q.length;n<i;n++)t._q[n].token===e&&(t._q[n].del=!0)}),this._q=this._q.filter(function(e){return!e.del})}},{key:"_invalidTokenMessage",value:function(e){return"["+e+"] - Token not informed."}},{key:"_s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"_genId",value:function(){return this._s4()+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+this._s4()+this._s4()}}]),e}()),e("Bus",r)}}});